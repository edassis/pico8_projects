pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
ball={x=15,y=15,dx=2,dy=2,r=2}

pad={x=62,y=122,w=28,h=4,sp=5}

--running time
rt=0

function ball.move(dt)
	ball.x += ball.dx * dt
	ball.y += ball.dy * dt
end

function ball.collision()
	--margin
	local marg = 6
	
	-- right/left side
	if ball.x > 128-marg or
			ball.x < 0+marg then
		ball.dx *= -1
	end

	-- up
	if ball.y < 0+marg then
		ball.dy *= -1
	end

	-- paddle
	if pget(ball.x,ball.y+ball.r+1)
			== 12 then
		ball.dy *= -1
	end
end

function pad.move(dt)
	--left
	if (btn(0)) pad.x -=pad.sp * dt
	--right
	if (btn(1)) pad.x +=pad.sp * dt
end

function game()
	-- game over
	if ball.y > 130 then
		cls()
		?"game over"
		stop()
	end
end

--##############################
function _init()
	rt = t()
end

function _update60()
	cls()
 local dt = t() - rt
	rt += dt
	?dt
	ball:move(dt)
	--pad:move(dt)

	ball:collision()
end

function _draw()
	--cls()
 circfill(ball.x,ball.y,
		ball.r,10)
	rect(pad.x,pad.y,pad.x+pad.w,
		pad.y+pad.h,12)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100002e0502a0502705025050220501f0501d0501c050190501605013050100500e0500b050080500605005050040500305001050000500005000040000300002000000000000000000000000000000000000
